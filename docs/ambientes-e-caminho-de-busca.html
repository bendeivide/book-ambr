<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 8 Ambientes e caminho de busca | Estudando o Ambiente R</title>
  <meta name="description" content="Capítulo 8 Ambientes e caminho de busca | Estudando o Ambiente R" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 8 Ambientes e caminho de busca | Estudando o Ambiente R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bendeivide.github.io/book-eambr/" />
  
  
  <meta name="github-repo" content="bendeivide/book-eambr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 8 Ambientes e caminho de busca | Estudando o Ambiente R" />
  
  
  

<meta name="author" content="Ben Dêivide, Diego Arthur" />


<meta name="date" content="2021-09-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pacotes.html"/>
<link rel="next" href="interfaces-com-outras-linguagens.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Estudando o ambiente R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bem-vindo</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licença"><i class="fa fa-check"></i>Licença</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="epígrafe.html"><a href="epígrafe.html"><i class="fa fa-check"></i>Epígrafe</a></li>
<li class="chapter" data-level="1" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html"><i class="fa fa-check"></i><b>1</b> Introdução ao livro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html#basico"><i class="fa fa-check"></i><b>1.1</b> Programação em R (Nível Básico)</a></li>
<li class="chapter" data-level="1.2" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html#intermediario"><i class="fa fa-check"></i><b>1.2</b> Programação em R (Nível Intermediário)</a></li>
<li class="chapter" data-level="1.3" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html#avancado"><i class="fa fa-check"></i><b>1.3</b> Programação em R (Nível Avançado)</a></li>
<li class="chapter" data-level="1.4" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html#referencias"><i class="fa fa-check"></i><b>1.4</b> Referências dos curso</a></li>
<li class="chapter" data-level="1.5" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html#buscarmateriais"><i class="fa fa-check"></i><b>1.5</b> Onde encontrar os nossos materiais</a></li>
<li class="chapter" data-level="1.6" data-path="introdução-ao-livro.html"><a href="introdução-ao-livro.html#pacutilizados"><i class="fa fa-check"></i><b>1.6</b> Pacotes R utilizados para esse curso</a></li>
</ul></li>
<li class="part"><span><b>I Programação em R (Nível Básico)</b></span></li>
<li class="chapter" data-level="2" data-path="instalação-do-r-e-rstudio-para-o-so-windows.html"><a href="instalação-do-r-e-rstudio-para-o-so-windows.html"><i class="fa fa-check"></i><b>2</b> Instalação do R e RStudio para o SO Windows</a>
<ul>
<li class="chapter" data-level="2.1" data-path="instalação-do-r-e-rstudio-para-o-so-windows.html"><a href="instalação-do-r-e-rstudio-para-o-so-windows.html#como-utilizar-o-r-e-o-rstudio"><i class="fa fa-check"></i><b>2.1</b> Como utilizar o R e o RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="instalação-do-r-e-rstudio-para-o-so-windows.html"><a href="instalação-do-r-e-rstudio-para-o-so-windows.html#história-do-r"><i class="fa fa-check"></i><b>2.2</b> História do R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html"><i class="fa fa-check"></i><b>3</b> Introdução ao R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#como-o-r-trabalha"><i class="fa fa-check"></i><b>3.1</b> Como o R trabalha</a></li>
<li class="chapter" data-level="3.2" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#comandos-no-r-e-ambiente-global"><i class="fa fa-check"></i><b>3.2</b> Comandos no R e Ambiente Global</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#console-e-prompt-de-comando"><i class="fa fa-check"></i><b>3.2.1</b> Console e <em>Prompt</em> de comando</a></li>
<li class="chapter" data-level="3.2.2" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#comandos-elementares"><i class="fa fa-check"></i><b>3.2.2</b> Comandos elementares</a></li>
<li class="chapter" data-level="3.2.3" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#execução-de-comandos"><i class="fa fa-check"></i><b>3.2.3</b> Execução de comandos</a></li>
<li class="chapter" data-level="3.2.4" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#chamada-e-correção-de-comandos-anteriores"><i class="fa fa-check"></i><b>3.2.4</b> Chamada e correção de comandos anteriores</a></li>
<li class="chapter" data-level="3.2.5" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#ambiente-global-área-de-trabalho-ou-workspace"><i class="fa fa-check"></i><b>3.2.5</b> Ambiente Global (área de trabalho ou <em>Workspace</em>)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#arquivos-.rdata-e-.rhistory"><i class="fa fa-check"></i><b>3.3</b> Arquivos <code>.RData</code> e <code>.Rhistory</code></a></li>
<li class="chapter" data-level="3.4" data-path="introdução-ao-r.html"><a href="introdução-ao-r.html#criando-e-salvando-um-script"><i class="fa fa-check"></i><b>3.4</b> Criando e salvando um <em>script</em></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objetos.html"><a href="objetos.html"><i class="fa fa-check"></i><b>4</b> Objetos</a>
<ul>
<li class="chapter" data-level="4.1" data-path="objetos.html"><a href="objetos.html#atributos"><i class="fa fa-check"></i><b>4.1</b> Atributos</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="objetos.html"><a href="objetos.html#atributos-1"><i class="fa fa-check"></i><b>4.1.1</b> Atributos</a></li>
<li class="chapter" data-level="4.1.2" data-path="objetos.html"><a href="objetos.html#atributos-intrínsecos"><i class="fa fa-check"></i><b>4.1.2</b> Atributos intrínsecos</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="objetos.html"><a href="objetos.html#coersão"><i class="fa fa-check"></i><b>4.2</b> Coersão</a></li>
<li class="chapter" data-level="4.3" data-path="objetos.html"><a href="objetos.html#tipo-de-objetos"><i class="fa fa-check"></i><b>4.3</b> Tipo de objetos</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="objetos.html"><a href="objetos.html#vetores"><i class="fa fa-check"></i><b>4.3.1</b> Vetores</a></li>
<li class="chapter" data-level="4.3.2" data-path="objetos.html"><a href="objetos.html#matrizes-bidimensionais"><i class="fa fa-check"></i><b>4.3.2</b> Matrizes bidimensionais</a></li>
<li class="chapter" data-level="4.3.3" data-path="objetos.html"><a href="objetos.html#matrizes-multidimensionais"><i class="fa fa-check"></i><b>4.3.3</b> Matrizes multidimensionais</a></li>
<li class="chapter" data-level="4.3.4" data-path="objetos.html"><a href="objetos.html#listas"><i class="fa fa-check"></i><b>4.3.4</b> Listas</a></li>
<li class="chapter" data-level="4.3.5" data-path="objetos.html"><a href="objetos.html#quadro-de-dados"><i class="fa fa-check"></i><b>4.3.5</b> Quadro de dados</a></li>
<li class="chapter" data-level="4.3.6" data-path="objetos.html"><a href="objetos.html#importando-dados"><i class="fa fa-check"></i><b>4.3.6</b> Importando dados</a></li>
<li class="chapter" data-level="4.3.7" data-path="objetos.html"><a href="objetos.html#funções"><i class="fa fa-check"></i><b>4.3.7</b> Funções</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="boas-práticas-de-como-escrever-um-código.html"><a href="boas-práticas-de-como-escrever-um-código.html"><i class="fa fa-check"></i><b>5</b> Boas práticas de como escrever um código</a>
<ul>
<li class="chapter" data-level="5.1" data-path="boas-práticas-de-como-escrever-um-código.html"><a href="boas-práticas-de-como-escrever-um-código.html#nomes-de-arquivos"><i class="fa fa-check"></i><b>5.1</b> Nomes de arquivos</a></li>
<li class="chapter" data-level="5.2" data-path="boas-práticas-de-como-escrever-um-código.html"><a href="boas-práticas-de-como-escrever-um-código.html#boa-escolha"><i class="fa fa-check"></i><b>5.2</b> Boa escolha:</a></li>
<li class="chapter" data-level="5.3" data-path="boas-práticas-de-como-escrever-um-código.html"><a href="boas-práticas-de-como-escrever-um-código.html#má-escolha"><i class="fa fa-check"></i><b>5.3</b> Má escolha:</a></li>
<li class="chapter" data-level="5.4" data-path="boas-práticas-de-como-escrever-um-código.html"><a href="boas-práticas-de-como-escrever-um-código.html#comentar-as-linahs-de-comando"><i class="fa fa-check"></i><b>5.4</b> Comentar as linahs de comando</a></li>
<li class="chapter" data-level="5.5" data-path="boas-práticas-de-como-escrever-um-código.html"><a href="boas-práticas-de-como-escrever-um-código.html#boa-escolha-1"><i class="fa fa-check"></i><b>5.5</b> Boa escolha:</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="objeto-x.html"><a href="objeto-x.html"><i class="fa fa-check"></i><b>6</b> Objeto x</a>
<ul>
<li class="chapter" data-level="6.1" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-1"><i class="fa fa-check"></i><b>6.1</b> Má escolha:</a></li>
<li class="chapter" data-level="6.2" data-path="objeto-x.html"><a href="objeto-x.html#nome-de-objetos"><i class="fa fa-check"></i><b>6.2</b> Nome de objetos</a></li>
<li class="chapter" data-level="6.3" data-path="objeto-x.html"><a href="objeto-x.html#boa-escolha-2"><i class="fa fa-check"></i><b>6.3</b> Boa escolha:</a></li>
<li class="chapter" data-level="6.4" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-2"><i class="fa fa-check"></i><b>6.4</b> Má escolha:</a></li>
<li class="chapter" data-level="6.5" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-3"><i class="fa fa-check"></i><b>6.5</b> Má escolha:</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="objeto-x.html"><a href="objeto-x.html#sintaxe"><i class="fa fa-check"></i><b>6.5.1</b> Sintaxe</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="objeto-x.html"><a href="objeto-x.html#boa-escolha-3"><i class="fa fa-check"></i><b>6.6</b> Boa escolha:</a></li>
<li class="chapter" data-level="6.7" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-4"><i class="fa fa-check"></i><b>6.7</b> Má escolha:</a></li>
<li class="chapter" data-level="6.8" data-path="objeto-x.html"><a href="objeto-x.html#boa-escolha-4"><i class="fa fa-check"></i><b>6.8</b> Boa escolha:</a></li>
<li class="chapter" data-level="6.9" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-5"><i class="fa fa-check"></i><b>6.9</b> Má escolha:</a></li>
<li class="chapter" data-level="6.10" data-path="objeto-x.html"><a href="objeto-x.html#boa-escolha-5"><i class="fa fa-check"></i><b>6.10</b> Boa escolha:</a></li>
<li class="chapter" data-level="6.11" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-6"><i class="fa fa-check"></i><b>6.11</b> Má escolha:</a></li>
<li class="chapter" data-level="6.12" data-path="objeto-x.html"><a href="objeto-x.html#boa-escolha-6"><i class="fa fa-check"></i><b>6.12</b> Boa escolha:</a></li>
<li class="chapter" data-level="6.13" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-7"><i class="fa fa-check"></i><b>6.13</b> Má escolha:</a></li>
<li class="chapter" data-level="6.14" data-path="objeto-x.html"><a href="objeto-x.html#boa-escolha-7"><i class="fa fa-check"></i><b>6.14</b> Boa escolha:</a></li>
<li class="chapter" data-level="6.15" data-path="objeto-x.html"><a href="objeto-x.html#má-escolha-8"><i class="fa fa-check"></i><b>6.15</b> Má escolha:</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="pacotes.html"><a href="pacotes.html"><i class="fa fa-check"></i><b>7</b> Pacotes</a>
<ul>
<li class="chapter" data-level="7.1" data-path="pacotes.html"><a href="pacotes.html#instalação-de-um-pacote"><i class="fa fa-check"></i><b>7.1</b> Instalação de um pacote</a></li>
<li class="chapter" data-level="7.2" data-path="pacotes.html"><a href="pacotes.html#objetivos-de-um-pacote"><i class="fa fa-check"></i><b>7.2</b> Objetivos de um pacote</a></li>
<li class="chapter" data-level="7.3" data-path="pacotes.html"><a href="pacotes.html#utilizando-funções-de-um-pacote"><i class="fa fa-check"></i><b>7.3</b> Utilizando funções de um pacote</a></li>
<li class="chapter" data-level="7.4" data-path="pacotes.html"><a href="pacotes.html#carregando-e-anexando-um-pacote"><i class="fa fa-check"></i><b>7.4</b> Carregando e anexando um pacote</a></li>
<li class="chapter" data-level="7.5" data-path="pacotes.html"><a href="pacotes.html#namespace-de-um-pacote"><i class="fa fa-check"></i><b>7.5</b> <em>NAMESPACE</em> de um pacote</a></li>
<li class="chapter" data-level="7.6" data-path="pacotes.html"><a href="pacotes.html#usando-os-operadores-e"><i class="fa fa-check"></i><b>7.6</b> Usando os operadores <code>::</code> e <code>:::</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ambientes-e-caminho-de-busca.html"><a href="ambientes-e-caminho-de-busca.html"><i class="fa fa-check"></i><b>8</b> Ambientes e caminho de busca</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ambientes-e-caminho-de-busca.html"><a href="ambientes-e-caminho-de-busca.html#a-superatribuição"><i class="fa fa-check"></i><b>8.1</b> A superatribuição</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="interfaces-com-outras-linguagens.html"><a href="interfaces-com-outras-linguagens.html"><i class="fa fa-check"></i><b>9</b> Interfaces com outras linguagens</a></li>
<li class="divider"></li>
<li><a href="https://bendeivide.github.io/cursor" target="blank">Acesse o curso desse material!</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Estudando o Ambiente R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ambientes-e-caminho-de-busca" class="section level1" number="8">
<h1><span class="header-section-number">Capítulo 8</span> Ambientes e caminho de busca</h1>
<p>Na seção sobre funções, discutimos dois pontos interessantes sobre objetos, que é a atribuição e o escopo. E esses dois pontos estão intimamente relacionados ao objeto ambiente, de modo “environment.” O ambiente é um objeto que armazena, em forma de lista, as ligações dos nomes associados aos objetos. Porém, existem diferenças entre o objeto lista do objeto ambiente, com quatro exceções (Wickham (2019)):</p>
<ul>
<li>Cada nome deve ser único;</li>
<li>Os nomes em um ambiente não são ordenados;</li>
<li>Um ambiente tem um pai ou também chamado de ambiente superior;</li>
<li>Ambientes não são copiados quando modificados.</li>
</ul>
<p>Muitas dessas definições são complexas para esse momento. E uma profundidade sobre o assunto, será abordada no módulo Programação em R (Nível Intermediário). Contudo, introduziremos algumas características importante os objetos ambiente.</p>
<p>O ambiente de trabalho do R é conhecido como ambiente global, pois é onde todo o processo de interação da linguagem ocorre. Existe um nome específico associado a esse objeto, que é .GlobalEnv, ou também pode ser acessado pela função globalenv(). Para sabermos quais os nomes que existem nesse ambiente, usamos a função ls(), isto é</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="ambientes-e-caminho-de-busca.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nomes no ambiente global</span></span>
<span id="cb265-2"><a href="ambientes-e-caminho-de-busca.html#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>Quando o resultado da função é character(0), significa que não existem nomes criados no ambiente global. O ambiente corrente de trabalho é informado pela função environment(), isto é,</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="ambientes-e-caminho-de-busca.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparando os ambientes</span></span>
<span id="cb267-2"><a href="ambientes-e-caminho-de-busca.html#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">environment</span>(), .GlobalEnv)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="ambientes-e-caminho-de-busca.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forma errada de comparar ambientes (Erro...)</span></span>
<span id="cb269-2"><a href="ambientes-e-caminho-de-busca.html#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>() <span class="sc">==</span> .GlobalEnv</span></code></pre></div>
<p>Error in environment() == .GlobalEnv: comparação (1) é possível apenas para tipos lista ou atômicos</p>
<p>A segunda forma é equivocada, porque os ambientes não são vetores. Assim, como também não podemos utilizar o sistema de indexação, isto é,</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="ambientes-e-caminho-de-busca.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando objetos no ambiente global</span></span>
<span id="cb270-2"><a href="ambientes-e-caminho-de-busca.html#cb270-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span>; a <span class="ot">&lt;-</span> <span class="st">&quot;Ben&quot;</span>; x <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb270-3"><a href="ambientes-e-caminho-de-busca.html#cb270-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando os nomes no ambiente global</span></span>
<span id="cb270-4"><a href="ambientes-e-caminho-de-busca.html#cb270-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="ambientes-e-caminho-de-busca.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acessando o objeto &quot;a&quot;</span></span>
<span id="cb272-2"><a href="ambientes-e-caminho-de-busca.html#cb272-2" aria-hidden="true" tabindex="-1"></a>.GlobalEnv<span class="sc">$</span>a</span></code></pre></div>
<pre><code>## [1] &quot;Ben&quot;</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="ambientes-e-caminho-de-busca.html#cb274-1" aria-hidden="true" tabindex="-1"></a>.GlobalEnv[[<span class="st">&quot;a&quot;</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;Ben&quot;</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="ambientes-e-caminho-de-busca.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acessando o primeiro nome (Erro...)</span></span>
<span id="cb276-2"><a href="ambientes-e-caminho-de-busca.html#cb276-2" aria-hidden="true" tabindex="-1"></a>.GlobalEnv[[<span class="dv">1</span>]]</span></code></pre></div>
<p>Error in .GlobalEnv[[1]]: argumentos errados para obtenção de subconjuntos de um ambiente</p>
<p>A última linha de comando retorna um erro, porque os nomes em ambientes não são ordenados, ao invés, devemos chamar os resultados por meio de $ ou .</p>
<p>Poderemos criar um ambiente pela função new.env(), e inserir ligações dentre dele, como apresentado a seguir.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="ambientes-e-caminho-de-busca.html#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando objetos no ambiente global</span></span>
<span id="cb277-2"><a href="ambientes-e-caminho-de-busca.html#cb277-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span>; a <span class="ot">&lt;-</span> <span class="st">&quot;Ben&quot;</span>; x <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb277-3"><a href="ambientes-e-caminho-de-busca.html#cb277-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando os nomes no ambiente global</span></span>
<span id="cb277-4"><a href="ambientes-e-caminho-de-busca.html#cb277-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="ambientes-e-caminho-de-busca.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um objeto ambiente no ambiente global</span></span>
<span id="cb279-2"><a href="ambientes-e-caminho-de-busca.html#cb279-2" aria-hidden="true" tabindex="-1"></a>amb1 <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb279-3"><a href="ambientes-e-caminho-de-busca.html#cb279-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Inserindo nomes nesse no ambiente &quot;amb1&quot;</span></span>
<span id="cb279-4"><a href="ambientes-e-caminho-de-busca.html#cb279-4" aria-hidden="true" tabindex="-1"></a>amb1<span class="sc">$</span>d <span class="ot">&lt;-</span> <span class="dv">3</span>; amb1<span class="sc">$</span>e <span class="ot">&lt;-</span> <span class="st">&quot;FALSE&quot;</span></span>
<span id="cb279-5"><a href="ambientes-e-caminho-de-busca.html#cb279-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando nomes no ambiente global</span></span>
<span id="cb279-6"><a href="ambientes-e-caminho-de-busca.html#cb279-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;    &quot;amb1&quot; &quot;b&quot;    &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="ambientes-e-caminho-de-busca.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando nomes no ambiente &quot;amb1&quot;</span></span>
<span id="cb281-2"><a href="ambientes-e-caminho-de-busca.html#cb281-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="at">envir =</span> amb1)</span></code></pre></div>
<pre><code>## [1] &quot;d&quot; &quot;e&quot;</code></pre>
<p>Todo ambiente tem um ambiente pai ou ambiente superior. Quando um nome não é encontrado no ambiente corrente, o R procurará no ambiente pai. Para saber, use parent.env(), isto é,</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="ambientes-e-caminho-de-busca.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parent.env</span>(amb1)</span></code></pre></div>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
<p>O único ambiente que não tem pai é o ambiente vazio, objeto emptyenv(), que pode ser observado pela linha de comando:</p>
<pre><code>parent.env(emptyenv())</code></pre>
<p>Error in parent.env(emptyenv()): o ambiente vazio não tem pai</p>
<div id="a-superatribuição" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> A superatribuição</h2>
<p>A atribuição (&lt;-) é uma função que associa um nome a um objeto no ambiente corrente. Quando usamos o R, quase sempre esse ambiente é o ambiente global. A superatribuição (&lt;&lt;-) cria um nome e o associa a um objeto no ambiente pai do ambiente de onde essa associação está sendo criada. Vejamos,</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="ambientes-e-caminho-de-busca.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando o objeto x e o imprimindo</span></span>
<span id="cb286-2"><a href="ambientes-e-caminho-de-busca.html#cb286-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span>; x</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="ambientes-e-caminho-de-busca.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando uma funcao com a superatribuicao</span></span>
<span id="cb288-2"><a href="ambientes-e-caminho-de-busca.html#cb288-2" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span>  <span class="cf">function</span>() {</span>
<span id="cb288-3"><a href="ambientes-e-caminho-de-busca.html#cb288-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Obj2</span></span>
<span id="cb288-4"><a href="ambientes-e-caminho-de-busca.html#cb288-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb288-5"><a href="ambientes-e-caminho-de-busca.html#cb288-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Modificando x do ambiente global</span></span>
<span id="cb288-6"><a href="ambientes-e-caminho-de-busca.html#cb288-6" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;&lt;-</span> <span class="dv">2</span></span>
<span id="cb288-7"><a href="ambientes-e-caminho-de-busca.html#cb288-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Imprimindo o ambiente de execucao</span></span>
<span id="cb288-8"><a href="ambientes-e-caminho-de-busca.html#cb288-8" aria-hidden="true" tabindex="-1"></a>  env <span class="ot">&lt;-</span> <span class="fu">environment</span>()</span>
<span id="cb288-9"><a href="ambientes-e-caminho-de-busca.html#cb288-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Imprimindo o Obj2</span></span>
<span id="cb288-10"><a href="ambientes-e-caminho-de-busca.html#cb288-10" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">x =</span> x, <span class="st">&quot;Ambiente de execução&quot;</span> <span class="ot">=</span> env, <span class="st">&quot;Ambiente Pai&quot;</span> <span class="ot">=</span> <span class="fu">parent.env</span>(env))</span>
<span id="cb288-11"><a href="ambientes-e-caminho-de-busca.html#cb288-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Retornando a lista</span></span>
<span id="cb288-12"><a href="ambientes-e-caminho-de-busca.html#cb288-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb288-13"><a href="ambientes-e-caminho-de-busca.html#cb288-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb288-14"><a href="ambientes-e-caminho-de-busca.html#cb288-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimindo f1</span></span>
<span id="cb288-15"><a href="ambientes-e-caminho-de-busca.html#cb288-15" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>()</span></code></pre></div>
<pre><code>## $x
## [1] 1
## 
## $`Ambiente de execução`
## &lt;environment: 0x000000001601fd68&gt;
## 
## $`Ambiente Pai`
## &lt;environment: R_GlobalEnv&gt;</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="ambientes-e-caminho-de-busca.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimindo x</span></span>
<span id="cb290-2"><a href="ambientes-e-caminho-de-busca.html#cb290-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="ambientes-e-caminho-de-busca.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimindo o ambiente envolvente de f1</span></span>
<span id="cb292-2"><a href="ambientes-e-caminho-de-busca.html#cb292-2" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(f1)</span></code></pre></div>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="ambientes-e-caminho-de-busca.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimindo os nomes do ambiente global</span></span>
<span id="cb294-2"><a href="ambientes-e-caminho-de-busca.html#cb294-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;    &quot;amb1&quot; &quot;b&quot;    &quot;f1&quot;   &quot;x&quot;</code></pre>
<p>Esse caso é interessante porque vemos dois nomes associados a objetos em ambientes diferentes. Alguns ambientes são criados pela função function(), são os chamados ambientes funcionais. Um deles é o ambiente envolvente, já comentado na seção sobre funções. O ambiente envolvente da função f1 é o ambiente global. Já no corpo da função f1, um outro ambiente surge quando a função é chamada, é o ambiente de execução. Toda vez que a função é chamada, cria-se um novo ambiente de execução. Observemos os identificadores, em Ambiente de execução, quando executamos a função mais de uma vez,</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="ambientes-e-caminho-de-busca.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>()<span class="sc">$</span><span class="st">`</span><span class="at">Ambiente de execução</span><span class="st">`</span></span></code></pre></div>
<pre><code>## &lt;environment: 0x0000000013ad0f38&gt;</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="ambientes-e-caminho-de-busca.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>()<span class="sc">$</span><span class="st">`</span><span class="at">Ambiente de execução</span><span class="st">`</span></span></code></pre></div>
<pre><code>## &lt;environment: 0x0000000015ec5078&gt;</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="ambientes-e-caminho-de-busca.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>()<span class="sc">$</span><span class="st">`</span><span class="at">Ambiente de execução</span><span class="st">`</span></span></code></pre></div>
<pre><code>## &lt;environment: 0x000000001634ff80&gt;</code></pre>
<p>O ambiente pai do ambiente de execução, é o ambiente envolvente de f1, que nesse caso é o ambiente global. Assim, observe que o ocorre quando executamos o comando de superatribuição. O nome x no ambiente global passou a está associado ao valor 2, porque foi alterado por &lt;&lt;-, mas o nome x continuou associado ao valor 1, porque a função f1() retornou o valor 1. Isso mostra que a superatribuição não cria um objeto no ambiente atual, mas em um ambiente pai se não existe ou altera o nome existente. Vejamos o complemento dessa afirmação no próximo exemplo.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="ambientes-e-caminho-de-busca.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando os nomes no ambiente global</span></span>
<span id="cb302-2"><a href="ambientes-e-caminho-de-busca.html#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;    &quot;amb1&quot; &quot;b&quot;    &quot;f1&quot;   &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="ambientes-e-caminho-de-busca.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando uma funcao</span></span>
<span id="cb304-2"><a href="ambientes-e-caminho-de-busca.html#cb304-2" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span>  <span class="cf">function</span>() {</span>
<span id="cb304-3"><a href="ambientes-e-caminho-de-busca.html#cb304-3" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;&lt;-</span> <span class="dv">2</span></span>
<span id="cb304-4"><a href="ambientes-e-caminho-de-busca.html#cb304-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb304-5"><a href="ambientes-e-caminho-de-busca.html#cb304-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Executando f2</span></span>
<span id="cb304-6"><a href="ambientes-e-caminho-de-busca.html#cb304-6" aria-hidden="true" tabindex="-1"></a><span class="fu">f2</span>()</span>
<span id="cb304-7"><a href="ambientes-e-caminho-de-busca.html#cb304-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando novamente os nomes no ambiente global</span></span>
<span id="cb304-8"><a href="ambientes-e-caminho-de-busca.html#cb304-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;    &quot;amb1&quot; &quot;b&quot;    &quot;f1&quot;   &quot;f2&quot;   &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="ambientes-e-caminho-de-busca.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando o valor de x</span></span>
<span id="cb306-2"><a href="ambientes-e-caminho-de-busca.html#cb306-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Com a superatribuição executada dentro de f2() e como no ambiente pai não eistia o nome x, este foi criado e associado ao valor 2. Um próximo exemplo, consideramos um ambiente envolvente que não seja o ambiente global. Vejamos,</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="ambientes-e-caminho-de-busca.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Funcao contador</span></span>
<span id="cb308-2"><a href="ambientes-e-caminho-de-busca.html#cb308-2" aria-hidden="true" tabindex="-1"></a>contador <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb308-3"><a href="ambientes-e-caminho-de-busca.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb308-4"><a href="ambientes-e-caminho-de-busca.html#cb308-4" aria-hidden="true" tabindex="-1"></a>  env1 <span class="ot">&lt;-</span> <span class="fu">environment</span>()</span>
<span id="cb308-5"><a href="ambientes-e-caminho-de-busca.html#cb308-5" aria-hidden="true" tabindex="-1"></a>  aux <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb308-6"><a href="ambientes-e-caminho-de-busca.html#cb308-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do something useful, then ...</span></span>
<span id="cb308-7"><a href="ambientes-e-caminho-de-busca.html#cb308-7" aria-hidden="true" tabindex="-1"></a>    i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb308-8"><a href="ambientes-e-caminho-de-busca.html#cb308-8" aria-hidden="true" tabindex="-1"></a>    env2 <span class="ot">&lt;-</span> <span class="fu">environment</span>()</span>
<span id="cb308-9"><a href="ambientes-e-caminho-de-busca.html#cb308-9" aria-hidden="true" tabindex="-1"></a>    res2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">i =</span> i, <span class="st">`</span><span class="at">AmbExec_aux</span><span class="st">`</span> <span class="ot">=</span> env2, <span class="st">`</span><span class="at">AmbExec_contador</span><span class="st">`</span> <span class="ot">=</span> env1)</span>
<span id="cb308-10"><a href="ambientes-e-caminho-de-busca.html#cb308-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(res2)</span>
<span id="cb308-11"><a href="ambientes-e-caminho-de-busca.html#cb308-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb308-12"><a href="ambientes-e-caminho-de-busca.html#cb308-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb308-13"><a href="ambientes-e-caminho-de-busca.html#cb308-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Chamada de funcao</span></span>
<span id="cb308-14"><a href="ambientes-e-caminho-de-busca.html#cb308-14" aria-hidden="true" tabindex="-1"></a>contador1 <span class="ot">&lt;-</span> <span class="fu">contador</span>()</span>
<span id="cb308-15"><a href="ambientes-e-caminho-de-busca.html#cb308-15" aria-hidden="true" tabindex="-1"></a><span class="fu">contador1</span>()</span></code></pre></div>
<pre><code>## $i
## [1] 1
## 
## $AmbExec_aux
## &lt;environment: 0x0000000016395228&gt;
## 
## $AmbExec_contador
## &lt;environment: 0x000000001633aa38&gt;</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="ambientes-e-caminho-de-busca.html#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="fu">contador1</span>()</span></code></pre></div>
<pre><code>## $i
## [1] 2
## 
## $AmbExec_aux
## &lt;environment: 0x00000000144ebeb8&gt;
## 
## $AmbExec_contador
## &lt;environment: 0x000000001633aa38&gt;</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="ambientes-e-caminho-de-busca.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">contador1</span>()</span></code></pre></div>
<pre><code>## $i
## [1] 3
## 
## $AmbExec_aux
## &lt;environment: 0x00000000141ee9d0&gt;
## 
## $AmbExec_contador
## &lt;environment: 0x000000001633aa38&gt;</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="ambientes-e-caminho-de-busca.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chamada de funcao</span></span>
<span id="cb314-2"><a href="ambientes-e-caminho-de-busca.html#cb314-2" aria-hidden="true" tabindex="-1"></a>contador2 <span class="ot">&lt;-</span> <span class="fu">contador</span>()</span>
<span id="cb314-3"><a href="ambientes-e-caminho-de-busca.html#cb314-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contador2</span>()</span></code></pre></div>
<pre><code>## $i
## [1] 1
## 
## $AmbExec_aux
## &lt;environment: 0x0000000015ea8e88&gt;
## 
## $AmbExec_contador
## &lt;environment: 0x0000000014614270&gt;</code></pre>
<p>Quando uma função function() é criada dentro de outra função function() o ambiente de execução da função superior, contador(), é o ambiente envolvente da função interna, aux(). Dessa forma, o ambiente de execução de contador() não será mais efêmero, isto é, não será apagado após a execução, como pode ser visto em contador1(). Observamos que executamos contador1() três vezes. O nome i foi atualizado, devido a superatribuição, a cada chamada da mesma função. Ao passo que, quando realizamos uma nova chamada de contador(), por meio de contador2(), o resultado de i retora o valor 1, porque um novo ambiente de execução para contador() foi criado, como pode ser observado.</p>
<p>Os demais ambiente funcionais e exemplos, serão descritos no módulo Programação em R (Nível Intermediário).</p>
<p>Por fim, uma última forma do R encontrar os nomes é pelo <strong>caminho de busca</strong>, que além dos ambientes criados e o ambiente global, existem os ambientes de pacotes. Toda vez que um pacote é anexado ao caminho de busca, o ambiente de pacote anexado será sempre o pai do ambiente global. Vejamos,</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="ambientes-e-caminho-de-busca.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Caminho de busca</span></span>
<span id="cb316-2"><a href="ambientes-e-caminho-de-busca.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<pre><code>## [1] &quot;.GlobalEnv&quot;        &quot;package:stats&quot;     &quot;package:graphics&quot; 
## [4] &quot;package:grDevices&quot; &quot;package:utils&quot;     &quot;package:datasets&quot; 
## [7] &quot;package:methods&quot;   &quot;Autoloads&quot;         &quot;package:base&quot;</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="ambientes-e-caminho-de-busca.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Anexando o pacote SMR</span></span>
<span id="cb318-2"><a href="ambientes-e-caminho-de-busca.html#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SMR)</span>
<span id="cb318-3"><a href="ambientes-e-caminho-de-busca.html#cb318-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando o caminho de busca</span></span>
<span id="cb318-4"><a href="ambientes-e-caminho-de-busca.html#cb318-4" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;        &quot;package:SMR&quot;       &quot;package:stats&quot;    
##  [4] &quot;package:graphics&quot;  &quot;package:grDevices&quot; &quot;package:utils&quot;    
##  [7] &quot;package:datasets&quot;  &quot;package:methods&quot;   &quot;Autoloads&quot;        
## [10] &quot;package:base&quot;</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="ambientes-e-caminho-de-busca.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carregando o pacote midrangeMCP</span></span>
<span id="cb320-2"><a href="ambientes-e-caminho-de-busca.html#cb320-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(midrangeMCP)</span>
<span id="cb320-3"><a href="ambientes-e-caminho-de-busca.html#cb320-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando o caminho de busca</span></span>
<span id="cb320-4"><a href="ambientes-e-caminho-de-busca.html#cb320-4" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;          &quot;package:midrangeMCP&quot; &quot;package:SMR&quot;        
##  [4] &quot;package:stats&quot;       &quot;package:graphics&quot;    &quot;package:grDevices&quot;  
##  [7] &quot;package:utils&quot;       &quot;package:datasets&quot;    &quot;package:methods&quot;    
## [10] &quot;Autoloads&quot;           &quot;package:base&quot;</code></pre>
<p>A lista dos ambientes no caminho de busca segue a ordem hierárquica dos ambientes, de modo que o ambiente global será sempre o ambiente de trabalho, isto é, o ambiente corrente. Não foi apresentado nessa lista, o ambiente vazio, emptyenv(). Mas, poderemos utilizar o pacote rlang para isso.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="ambientes-e-caminho-de-busca.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um ambiente</span></span>
<span id="cb322-2"><a href="ambientes-e-caminho-de-busca.html#cb322-2" aria-hidden="true" tabindex="-1"></a>amb2 <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb322-3"><a href="ambientes-e-caminho-de-busca.html#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando seus parentais</span></span>
<span id="cb322-4"><a href="ambientes-e-caminho-de-busca.html#cb322-4" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">env_parents</span>(<span class="at">env =</span> amb2, <span class="at">last =</span> <span class="fu">emptyenv</span>())</span></code></pre></div>
<pre><code>##  [[1]] $ &lt;env: global&gt;
##  [[2]] $ &lt;env: package:midrangeMCP&gt;
##  [[3]] $ &lt;env: package:SMR&gt;
##  [[4]] $ &lt;env: package:stats&gt;
##  [[5]] $ &lt;env: package:graphics&gt;
##  [[6]] $ &lt;env: package:grDevices&gt;
##  [[7]] $ &lt;env: package:utils&gt;
##  [[8]] $ &lt;env: package:datasets&gt;
##  [[9]] $ &lt;env: package:methods&gt;
## [[10]] $ &lt;env: Autoloads&gt;
## [[11]] $ &lt;env: package:base&gt;
## [[12]] $ &lt;env: empty&gt;</code></pre>
<p>Dessa forma, é caminho de busca que o R procurará pelos nomes. Isso significa, que se o ambiente envolvente de uma função, por exemplo, for o ambiente vazio, o R procurará pelas funções básicas no pacote base e não será encontrado, pois nesse ambiente não há nomes e nem ambientes parentais. Por isso, que o R depende do escopo léxico para tudo. Vejamos,</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="ambientes-e-caminho-de-busca.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando uma funcao</span></span>
<span id="cb324-2"><a href="ambientes-e-caminho-de-busca.html#cb324-2" aria-hidden="true" tabindex="-1"></a>f3 <span class="ot">&lt;-</span> <span class="cf">function</span>() x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb324-3"><a href="ambientes-e-caminho-de-busca.html#cb324-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-4"><a href="ambientes-e-caminho-de-busca.html#cb324-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificando o ambiente envolvente de f3</span></span>
<span id="cb324-5"><a href="ambientes-e-caminho-de-busca.html#cb324-5" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(f3) <span class="ot">&lt;-</span> <span class="fu">emptyenv</span>()</span>
<span id="cb324-6"><a href="ambientes-e-caminho-de-busca.html#cb324-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-7"><a href="ambientes-e-caminho-de-busca.html#cb324-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Dependencias externas da funcao f3</span></span>
<span id="cb324-8"><a href="ambientes-e-caminho-de-busca.html#cb324-8" aria-hidden="true" tabindex="-1"></a>codetools<span class="sc">::</span><span class="fu">findGlobals</span>(f3)</span></code></pre></div>
<pre><code>## [1] &quot;+&quot; &quot;x&quot;</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="ambientes-e-caminho-de-busca.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chamando a funcao f3</span></span>
<span id="cb326-2"><a href="ambientes-e-caminho-de-busca.html#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f3</span>()</span></code></pre></div>
<p>Error in x + 1: não foi possível encontrar a função “+”</p>
<p>Isso não ocorre quando definimos o ambiente envolvente de f3() como sendo o ambiente global, porque quando a função buscar pelo operador de soma neste ambiente e não encontrar, f3() seguirá até o ambiente package:base, para encontrar o operador “+.”</p>
<p>Por isso, que usar a função attach() para anexar objetos do tipo quadro de dados (data frames), por exemplo, pode se tornar um problema em um código, quando temos nomes iguais para objetos diferentes. Para isso, apresentamos o código a seguir.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="ambientes-e-caminho-de-busca.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="co"># objeto quadro de dados</span></span>
<span id="cb327-2"><a href="ambientes-e-caminho-de-busca.html#cb327-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sd =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">var =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb327-3"><a href="ambientes-e-caminho-de-busca.html#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Caminho de busca</span></span>
<span id="cb327-4"><a href="ambientes-e-caminho-de-busca.html#cb327-4" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;          &quot;package:midrangeMCP&quot; &quot;package:SMR&quot;        
##  [4] &quot;package:stats&quot;       &quot;package:graphics&quot;    &quot;package:grDevices&quot;  
##  [7] &quot;package:utils&quot;       &quot;package:datasets&quot;    &quot;package:methods&quot;    
## [10] &quot;Autoloads&quot;           &quot;package:base&quot;</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="ambientes-e-caminho-de-busca.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># anexando &quot;dados&quot; ao caminho de busca</span></span>
<span id="cb329-2"><a href="ambientes-e-caminho-de-busca.html#cb329-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(dados)</span>
<span id="cb329-3"><a href="ambientes-e-caminho-de-busca.html#cb329-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando novamente o caminho de busca</span></span>
<span id="cb329-4"><a href="ambientes-e-caminho-de-busca.html#cb329-4" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;          &quot;dados&quot;               &quot;package:midrangeMCP&quot;
##  [4] &quot;package:SMR&quot;         &quot;package:stats&quot;       &quot;package:graphics&quot;   
##  [7] &quot;package:grDevices&quot;   &quot;package:utils&quot;       &quot;package:datasets&quot;   
## [10] &quot;package:methods&quot;     &quot;Autoloads&quot;           &quot;package:base&quot;</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="ambientes-e-caminho-de-busca.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimindo sd</span></span>
<span id="cb331-2"><a href="ambientes-e-caminho-de-busca.html#cb331-2" aria-hidden="true" tabindex="-1"></a>sd</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="ambientes-e-caminho-de-busca.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Desanexando &quot;dados&quot;</span></span>
<span id="cb333-2"><a href="ambientes-e-caminho-de-busca.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(dados)</span>
<span id="cb333-3"><a href="ambientes-e-caminho-de-busca.html#cb333-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimindo sd</span></span>
<span id="cb333-4"><a href="ambientes-e-caminho-de-busca.html#cb333-4" aria-hidden="true" tabindex="-1"></a>sd</span></code></pre></div>
<pre><code>## function (x, na.rm = FALSE) 
## sqrt(var(if (is.vector(x) || is.factor(x)) x else as.double(x), 
##     na.rm = na.rm))
## &lt;bytecode: 0x0000000015bcea70&gt;
## &lt;environment: namespace:stats&gt;</code></pre>
<p>Quando criamos o objeto dados, uma de suas colunas estava nomeada por sd, que também é o nome de uma função do pacote stats, que representa a variância. Porém, quando anexamos o objeto dados no caminho de busca, um novo ambiente é criado, como pai do ambiente global e com mesmo nome do objeto, e os elementos do objeto dados são copiados para esse ambiente. Assim, o nome sd foi procurado e não encontrado, seguindo a busca para o próximo ambiente que foi dados, e daí foi encontrado. Percebemos que também existe esse nome no ambiente do pacote stats, que é do tipo função. Entretanto, como o primeiro objeto encontrado associado a esse nome estava no ambiente dados, ele é retornado. Nesses casos, se usarmos a superatribuição, a alteração ocorrerá apenas na cópia dos elementos no ambiente anexado, e não nos elementos do objeto original. Caso haja a atribuição, o nome será criado no ambiente global.</p>
<p>Isso pode acabar se tornando um problema se muitos objetos forem anexados. Por isso, é preferível o uso da indexação ou $ para acessar os elementos de uma lista ou quadro de dados, evitando assim, conflitos na procura de nomes.</p>
<p>Desse mesmo modo, poderíamos pensar que esses mesmo conflitos poderiam surgir dentro de um pacote. Porém, graças ao NAMESPACE, isso não ocorre, sendo um dos assuntos abordados nos próximos módulos.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pacotes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="interfaces-com-outras-linguagens.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": true,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bendeivide/book-eambr/edit/main/07-nbasico.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsubsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
